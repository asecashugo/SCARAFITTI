<?xml version="1.0" encoding="utf-8"?>
<TcPlcObject Version="1.1.0.1" ProductVersion="3.1.4024.4">
  <GVL Name="GVL" Id="{bebee469-33ab-4dc5-83a7-e8c6445d8067}">
    <Declaration><![CDATA[{attribute 'qualified_only'}
VAR_GLOBAL
	
// Geometría del robot//
//todo en mm//

Pi : REAL := 3.1416;

d : REAL := 400;
l1 : REAL := 1000; //longitud brazo proximal
l2 : REAL := 1200; //longitud brazo distal

//Vértices robot

Xa : REAL:= 0; 
Ya : REAL:= 0; 
Xb : REAL:= 0; 
Yb : REAL:= 0; 
Xc : REAL:= 0; //posición x del spray
Xc_sp : REAL:= 0; //setpoint posición x del spray
Yc : REAL:= 0; //posición y del spray
Yc_sp : REAL:= 0; //setpoint posición y del spray
Xd : REAL:= 0; 
Yd : REAL:= 0; 
Xe : REAL:= 0; 
Ye : REAL:= 0; 

//Mitad de cada brazo

Xab : REAL:= 0; 
Yab : REAL:= 0; 
Xbc : REAL:= 0; 
Ybc : REAL:= 0; 
Xcd : REAL:= 0; 
Ycd : REAL:= 0; 
Xde : REAL:= 0; 
Yde : REAL:= 0;

//Arrays de brazos?

AB : ARRAY [1..2,1..2] OF REAL;
BC : ARRAY [1..2,1..2] OF REAL;
CD : ARRAY [1..2,1..2] OF REAL;
DE : ARRAY [1..2,1..2] OF REAL;


//Ángulos

alfa : REAL:= 0; //ángulo del brazo pxosimal izquierdo
alfa_sp : REAL:= 0; //setpoint ángulo del brazo pxosimal izquierdo
beta : REAL:= 0; //ángulo del brazo pxosimal derecho
beta_sp: REAL:= 0; //setpoint ángulo del brazo pxosimal derecho

alfa1 : REAL:= 0; //ángulo del brazo pxosimal izquierdo
beta1 : REAL:= 0; //ángulo del brazo pxosimal derecho
alfa2 : REAL:= 0; //ángulo del brazo pxosimal izquierdo
beta2 : REAL:= 0; //ángulo del brazo pxosimal derecho


	d1: REAL;
	error AT %Q*: BOOL;
	d2: REAL;

// Inputs

DI_enc1_a AT %I*: BOOL;
DI_enc1_b AT %I*: BOOL;
DI_enc2_a AT %I*: BOOL;
DI_enc2_b AT %I*: BOOL;

alfa_enc : REAL :=0;
beta_enc : REAL :=0;

//Encoder
Pulsos :UDINT := 600;
TotalAlfa AT %I*: UDINT :=0;
TotalBeta AT %I*: UDINT:=0;
END_VAR]]></Declaration>
  </GVL>
</TcPlcObject>